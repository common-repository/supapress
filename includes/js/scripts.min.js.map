{"version":3,"sources":["scripts.min.js"],"names":["$","angular","supapress_config","angularjs_support","module","run","$window","$rootScope","$location","supapress","changeURL","url","$apply","replace","window","blog_details","site_url","jQuery","on","e","$search","$carousel","$eTarget","target","initSearches","each","$this","this","data","supapressSearchInit","initCarousels","supapressInit","is","find","length","index","value","$elem","debounce","func","wait","immediate","timeout","context","args","arguments","later","apply","callNow","clearTimeout","setTimeout","gridAlign","maxHeight","$layout","$wrapper","height","addClass","showRetailerLinks","$button","next","hasClass","removeClass","setMaxCoverHeight","$images","settings","count","alignOnNextPrev","lazyLoad","attr","lazyLoadPlaceholder","off","slidesToShow","complete","trigger","fn","slick","parent","css","$carouselContainer","$toggleRetailerBtn","debounceResize","$searchLayout","$sortBy","$perPage","$pagination","$previous","$page","$next","ajaxURL","params","current","total","reload","name","baseUrl","location","protocol","hostname","pathname","query","search","substring","split","i","param","regex","RegExp","test","trim","changeLocationHref","href","loadFilters","ajax","type","showText","hideText","clearText","limits","filters","success","response","html","event","elem","$toggle","$additonalFilters","parents","text","parseInt","val"],"mappings":"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","file":"scripts.min.js","sourcesContent":["(function($) {\n     $(function() {\n\n        if(typeof angular === 'undefined') {\n            return false;\n        }\n\n        if (supapress_config.angularjs_support === 'true') {\n            angular.module('supapressAngular', []).run(['$window', '$rootScope', '$location', function ($window, $rootScope, $location) {\n                $window.supapress = $window.supapress || {};\n                $window.supapress.angular = $window.supapress.angular || {};\n                $window.supapress.angular.changeURL = function (url) {\n                    // Function to apply a url change\n                    $rootScope.$apply(function () {\n                        // Strip domain from URL\n                        $location.url(url.replace(window.supapress_config.blog_details.site_url, ''));\n                    });\n                };\n            }]);\n        }\n    });\n})(jQuery);\n(function($) {\n    $('body').on('DOMNodeInserted', function(e) {\n        var $eTarget = $(e.target), $search, $carousel,\n            initSearches = function($search) {\n                $search.each(function() {\n                    var $this = $(this);\n\n                    if(!$this.data('supapressInitialised')) {\n                        $this.supapressSearchInit();\n                    }\n                });\n            },\n            initCarousels = function($carousel) {\n                $carousel.each(function() {\n                    var $this = $(this);\n\n                    if(!$this.data('supapressInitialised')) {\n                        $this.supapressInit();\n                    }\n                });\n            };\n\n        // cater for the normal inserted divs on frontend\n        if ($eTarget.is('div.supapress')) {\n            $search = $eTarget.find('.search');\n            $carousel = $eTarget.find('.isbn-carousel');\n\n            initSearches($search);\n            initCarousels($carousel);\n        } else if ($eTarget.find('div.supapress').length > 0) {\n            $eTarget.find('div.supapress').each(function(index, value) {\n                var $elem = $(value);\n\n                $search = $elem.find('.search');\n                $carousel = $elem.find('.isbn-carousel');\n\n                initSearches($search);\n                initCarousels($carousel);\n            });\n        }\n    });\n})(jQuery);\n\n(function($) {\n    window.supapress = window.supapress || {};\n\n    var debounce = function(func, wait, immediate) {\n        var timeout;\n        return function() {\n            var context = this, args = arguments;\n            var later = function() {\n                timeout = null;\n                if (!immediate) func.apply(context, args);\n            };\n            var callNow = immediate && !timeout;\n            clearTimeout(timeout);\n            timeout = setTimeout(later, wait);\n            if (callNow) func.apply(context, args);\n        };\n    };\n\n    supapress.gridAlign = function(maxHeight, $layout) {\n        var $wrapper = $layout.find('[data-baseline-images=wrapper]');\n        $wrapper.height(maxHeight);\n        $wrapper.find('[data-baseline-images=image]').addClass('baselined');\n        $layout.data('aligned', true);\n    };\n\n    supapress.showRetailerLinks = function($button, $layout) {\n        $button.on('click', function(e) {\n            if( !$(this).next().hasClass('open') ) {\n                $layout.find('.sp__the-retailers--list.open').removeClass('open');\n                $(this).next().addClass('open');\n            } else {\n                $(this).next().removeClass('open');\n            }\n        });\n    };\n\n    supapress.setMaxCoverHeight = function($layout) {\n        var $wrapper = $layout.find('[data-baseline-images=wrapper]'),\n            $images = $wrapper.find('[data-baseline-images=image]'),\n            settings = $layout.data('carouselSettings') || {},\n            count = 0,\n            maxHeight = 0,\n            alignOnNextPrev = false,\n            onload;\n\n        $wrapper.addClass('image-wrapper');\n        $images.addClass('supapress-book-cover');\n\n        if(typeof settings.lazyLoad !== 'undefined') {\n            $layout.on('beforeChange', function() {\n                alignOnNextPrev = true;\n            });\n        }\n\n        if(!$layout.data('aligned')) {\n            $images.on('load', function (e) {\n                var $this = $(this);\n\n                // if lazyloading then first load will be placeholder, second will be real image\n                // if not lazy loading then this will be real image\n                // once real image has loaded we turn off the load event and use the each below instead\n                if (typeof settings.lazyLoad === 'undefined' || $this.attr('src') !== settings.lazyLoadPlaceholder) {\n                    count++;\n                    $this.off('load');\n                }\n\n                if ($this.height() > maxHeight) {\n                    maxHeight = $this.height();\n                }\n\n                // only fire while images are loading if the visible ones have finished loading\n                // don't want grid align to fire too much\n                if (count === $images.length || (typeof settings.lazyLoad !== 'undefined' && (count === settings.slidesToShow || alignOnNextPrev))) {\n                    alignOnNextPrev = false;\n                    return supapress.gridAlign(maxHeight, $layout);\n                }\n            }).each(function() {\n                if (this.complete) {\n                    $(this).trigger('load');\n                }\n            });\n        } else {\n            $images.each(function (index) {\n                var $this = $(this);\n\n                if ($this.height() > maxHeight) {\n                    maxHeight = $this.height();\n                }\n\n                // on the last image in the loop fire the grid alignment\n                if (index === ($images.length - 1)) {\n                    supapress.gridAlign(maxHeight, $layout);\n                }\n            });\n        }\n    };\n\n    $.fn.supapressInit = function() {\n        var $layout = this;\n\n        if( $layout.hasClass('isbn-carousel') && typeof $.fn.slick !== 'undefined' ) {\n            $layout.parent().css('overflow', 'visible');\n\n            var $carouselContainer = $layout.find('[data-container=\"carousel\"]');\n\n            if( $carouselContainer.length === 1 ) {\n                $carouselContainer.slick($layout.data('carouselSettings'));\n            } else {\n                $layout.slick($layout.data('carouselSettings'));\n            }\n        }\n\n        if( $layout.hasClass('isbn-grid') || $layout.hasClass('isbn-carousel') || $layout.hasClass('isbn-list') ) {\n            var $toggleRetailerBtn = $layout.find('.js-show-sp__the-retailers');\n            supapress.showRetailerLinks($toggleRetailerBtn, $layout);\n        }\n\n        if( $layout.hasClass('isbn-grid') || $layout.hasClass('isbn-carousel') || $layout.hasClass('search-grid') ) {\n            var debounceResize = debounce(function() {\n                supapress.setMaxCoverHeight($layout);\n            }, 300);\n            $(window).on('resize orientationchange', debounceResize);\n        }\n\n        $layout.data('supapressInitialised', true);\n    };\n\n    $('div.supapress > div').each(function() {\n        $(this).supapressInit();\n    });\n\n    $(window).trigger('resize');\n})(jQuery);\n\n(function($) {\n    window.supapress = window.supapress || {};\n\n    supapress.$searchLayout = null;\n\n    supapress.$sortBy = null;\n\n    supapress.$perPage = null;\n\n    supapress.$pagination = null;\n\n    supapress.$previous = null;\n\n    supapress.$page = null;\n\n    supapress.$next = null;\n\n    supapress.ajaxURL = null;\n\n    supapress.params = null;\n\n    supapress.current = null;\n\n    supapress.total = null;\n\n    supapress.reload = function(name, value) {\n        // Get base url\n        var baseUrl = window.location.protocol + '//' + window.location.hostname + window.location.pathname;\n\n        if(typeof name !== 'undefined' && typeof value !== 'undefined') {\n            // Get current query string\n            var query = window.location.search.substring(1);\n\n            // Split up query into array\n            var params = query.split('&');\n\n            query = '';\n\n            // Loop query params\n            for (var i=0; i<params.length; i++) {\n                // Split into key value pair\n                var param = params[i].split('=');\n\n                // If the key is blank (i.e. no query string) or the value is undefined or blank and the key is not the new param continue\n                if(param[0] === '' || (typeof param[1] === 'undefined' && param[0] !== name) || (param[1] === '' && param[0] !== name) || (param[0] === name && value === false)) {\n                    continue;\n                }\n\n                // Reset page number is any other params change as the result set changes to start from page 1\n                if(param[0] === 'page_number' && name !== 'page_number') {\n                    param[1] = 1;\n                }\n\n                // Add the key pair to the query string\n                query += query === '' ? '' : '&';\n                query += param[0] + '=';\n                query += param[0] === name ? value : param[1];\n            }\n\n            // Build regex param= to make sure it's been added\n            var regex = new RegExp(name + '=', 'g');\n\n            // If the new param is not added yet then added\n            if(regex.test(query) === false && value !== false) {\n                query += query === '' ? '' : '&';\n                query += name + '=' + value;\n            }\n\n            // reload the page with the new url\n            if($.trim(query) !== '') {\n                supapress.changeLocationHref(baseUrl + '?' + query);\n            } else {\n                supapress.changeLocationHref(baseUrl);\n            }\n        } else {\n            supapress.changeLocationHref(baseUrl);\n        }\n    };\n\n    supapress.changeLocationHref = function(url) {\n        if (typeof angular !== 'undefined' && supapress_config.angularjs_support === 'true') {\n            supapress.angular.changeURL(url);\n        } else {\n            window.location.href = url;\n        }\n    };\n\n    supapress.loadFilters = function() {\n        $.each(supapress.$searchLayout.find('.filter-load-wrapper'), function() {\n            var $this = $(this);\n\n            $.ajax({\n                url: supapress.ajaxURL + '?action=supapress_filters',\n                type: 'GET',\n                data: {\n                    params: supapress.params,\n                    showText: $this.data('show-text'),\n                    hideText: $this.data('hide-text'),\n                    clearText: $this.data('clear-text'),\n                    limits: $this.data('filter-limits'),\n                    filters: $this.data('filters')\n                },\n                success: function( response ) {\n                    $this.html( response ).removeClass('preloader-on');\n\n                    $this.find('a').on('click', function(event) {\n                        var $this = $(this);\n\n                        if($this.hasClass('clear-filters')) {\n                            supapress.reload();\n                        } else if($this.hasClass('clear-filter') && $this.attr('data-name')) {\n                            supapress.reload($this.attr('data-name'), false);\n                        } else if($this.attr('data-name') && $this.attr('data-seo')) {\n                            supapress.reload($this.attr('data-name'), $this.attr('data-seo'));\n                        }\n                    });\n\n                    $this.find('.additional-filters').each(function(index, elem) {\n                        var $elem = $(elem),\n                            height = $elem.height();\n\n                        $elem.css('height', height).data('height', height).css('maxHeight', 0);\n                    });\n\n                    $this.find('.additional-filters-toggle').on('click', function() {\n                        var $toggle = $(this),\n                            $additonalFilters = $toggle.parents('.filter-block').find('.additional-filters');\n\n                        if($additonalFilters.css('maxHeight') !== '0px') {\n                            $toggle.text($toggle.data('showLabel'));\n                            $additonalFilters.css('maxHeight', 0);\n                        } else {\n                            $toggle.text($toggle.data('hideLabel'));\n                            $additonalFilters.css('maxHeight', $additonalFilters.data('height'));\n                        }\n                    });\n                }\n            });\n        });\n    };\n\n    $.fn.supapressSearchInit = function() {\n        supapress.$searchLayout = this;\n        supapress.$sortBy = supapress.$searchLayout.find('.supapress-sort-by');\n        supapress.$perPage = supapress.$searchLayout.find('.supapress-per-page');\n        supapress.$pagination = supapress.$searchLayout.find('.supapress-pagination-wrapper');\n        supapress.$previous = supapress.$pagination.find('.supapress-previous');\n        supapress.$page = supapress.$pagination.find('.supapress-page');\n        supapress.$next = supapress.$pagination.find('.supapress-next');\n        supapress.ajaxURL = supapress.$searchLayout.parents('.supapress').data('ajax-url');\n        supapress.params = supapress.$searchLayout.parents('.supapress').data('widget-params');\n        supapress.current = parseInt(supapress.$pagination.attr('data-current'));\n        supapress.total = parseInt(supapress.$pagination.attr('data-total'));\n\n        // Load filters\n        supapress.loadFilters();\n\n        // Add event listeners for sort by\n        supapress.$sortBy.on('change', function() {\n            supapress.reload('supapress_order', $(this).val());\n        });\n\n        // Add event listeners for per page\n        supapress.$perPage.on('change', function() {\n            supapress.reload('amount', $(this).val());\n        });\n\n        // Add event listeners for previous page\n        supapress.$previous.on('click', function() {\n            if(supapress.current === 1) {\n                supapress.reload('page_number', supapress.total);\n            } else {\n                supapress.reload('page_number', supapress.current - 1);\n            }\n        });\n\n        // Add event listeners for page changer\n        supapress.$page.on('click', function() {\n            supapress.reload('page_number', $(this).attr('data-page'));\n        });\n\n        // Add event listeners for next page\n        supapress.$next.on('click', function() {\n            if(supapress.current === supapress.total) {\n                supapress.reload('page_number', 1);\n            } else {\n                supapress.reload('page_number', supapress.current + 1);\n            }\n        });\n\n        supapress.$searchLayout.data('supapressInitialised', true);\n    };\n\n    $('div.supapress .search').supapressSearchInit();\n})(jQuery);"]}